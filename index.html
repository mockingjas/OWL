<html ng-app="owlApp">
    <head>
        <script src="//code.angularjs.org/1.5.5/angular.min.js"></script>
        <link rel="stylesheet" type="text/css" href="styles/OWL.css">
        <title>OWL</title>
         <div  id="header" class="blue_bg">
            <div class="header_logo">
                <img src="styles/OWLogo.png" alt="logo" />
            </div>
        </div>
        <meta charset="utf-8">
        <script>
            var owlApp = angular.module('owlApp', []);
            owlApp.controller('myCtrl', function($scope,$http) {
                $scope.bookName="";
                
                //TODO get data from sql
                var booksUrl = 'books.json';
                $http.get(booksUrl).success(function(data){
                    $scope.books = data;                            
                });
                
                var _sortBy = function (field) {
                        $scope.sortField = field;
                };
                
                var _reverseOrder = function () {
                        $scope.isReversed = !$scope.isReversed;
                };
                
                $scope.sortBy = _sortBy;
                $scope.isReversed = "false";
                $scope.reverseOrder = _reverseOrder; 
                
                $scope.test="search";
        
                $scope.borrowBook = function(ID){
                    console.log(ID);
                }
                
                $scope.returnBook = function(ID){
                    console.log(ID);
                }
                
                $scope.waitBook = function(ID){
                    console.log(ID);
                }
            });

        </script>
    </head>
    <body> 
        <br />
        <br />
        <br />
        <div class="searchBarDiv">
            Search book:&nbsp;&nbsp;<input class="textFields" type="text" ng-model="searchFilter" placeholder='Search Book'>
        </div>
        <br />
        <br />
        <div ng-controller="myCtrl">
            <table id="tableStyle">
                <thead>
                    <tr>
                        <th><a href="" ng-click="sortBy('title'); reverseOrder();">Title</a></th>
                        <th><a href="" ng-click="sortBy('title'); reverseOrder();">Genre</a></th>
                        <th><a href="" ng-click="sortBy('title'); reverseOrder();">Author</a></th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                    <tr ng-repeat="book in books | filter : searchFilter | orderBy: sortField : reversed=isReversed track by book.id">
                        <td>{{book.title}}</td>
                        <td>{{book.genre}}</td>
                        <td>{{book.author}}</td>
                        <td><a href="" ng-click="borrowBook(book.id)">borrow</a></td>
                        <td><a href="" ng-click="returnBook(book.id)">return</a></td>
                        <td><a href="" ng-click="waitBook(book.id)">wait</a></td>
                    </tr>
                </thead>
            </table>
        </div>
        <div ng-controller="myCtrl">
        </div>
    </body>    
</html>